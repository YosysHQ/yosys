# PASS (only enable or only rst pass)
read_verilog -sv vivado_template.sv
design -save read
synth_xilinx -noiopad -noclkbuf -top ram_vivado -flatten
cd ram_vivado
select -assert-count 1 t:RAMB18E1
select -assert-none t:FD*
#select -assert-none t:RAMB18E1 %% t:* %D

# PASS (increasind data width pass)
design -reset
read_verilog -sv vivado_template.sv
hierarchy -chparam DATA_WIDTH 10 -top ram_vivado
synth_xilinx -noiopad -noclkbuf -top ram_vivado
cd ram_vivado
select -assert-count 1 t:RAMB18E1
select -assert-none t:FD*
#select -assert-none t:RAMB18E1 %% t:* %D

# FAIL (more than 1 BRAM fails)
design -reset
read_verilog -sv vivado_template.sv
hierarchy -chparam DATA_WIDTH 10 -top ram_vivado
hierarchy -chparam ADDRESS_WIDTH 12 -top ram_vivado
synth_xilinx -noiopad -noclkbuf -top ram_vivado
cd ram_vivado
select -assert-count 3 t:RAMB18E1
select -assert-none t:FD*
#select -assert-none t:RAMB18E1 %% t:* %D

# FAIL (both enable and reset as per the template, fails)
design -reset
read_verilog -sv -DWITH_RESET vivado_template.sv
synth_xilinx -noiopad -noclkbuf -top ram_vivado
cd ram_vivado
select -assert-count 1 t:RAMB18E1
select -assert-none t:FD*
#select -assert-none t:RAMB18E1 %% t:* %D
